# Ultralytics YOLO 🚀, AGPL-3.0 license



## 文件内容


```python
# Parameters
nc: 10 # number of classes
scales: # model compound scaling constants, i.e. 'model=yolov8n.yaml' will call yolov8m.yaml with scale 'n'
  # [depth, width, max_channels]
  n: [0.33, 0.25, 1024] # YOLOv8n summary: 225 layers,  3157200 parameters,  3157184 gradients,   8.9 GFLOPs
  s: [0.33, 0.50, 1024] # YOLOv8s summary: 225 layers, 11166560 parameters, 11166544 gradients,  28.8 GFLOPs
  m: [0.67, 0.75, 768] # YOLOv8m summary: 295 layers, 25902640 parameters, 25902624 gradients,  79.3 GFLOPs
  l: [1.00, 1.00, 512] # YOLOv8l summary: 365 layers, 43691520 parameters, 43691504 gradients, 165.7 GFLOPs
  x: [1.00, 1.25, 512] # YOLOv8x summary: 365 layers, 68229648 parameters, 68229632 gradients, 258.5 GFLOPs

# YOLOv8.0n backbone
backbone:
  # [from, repeats, module, args]
  - [-1, 1, Conv, [64, 3, 2]] # 0-P1/2
  - [-1, 1, Conv, [128, 3, 2]] # 1-P2/4
  - [-1, 3, C2f, [128, True]]
  - [-1, 1, Conv, [256, 3, 2]] # 3-P3/8
  - [-1, 6, C2f, [256, True]]
  - [-1, 1, Conv, [512, 3, 2]] # 5-P4/16
  - [-1, 6, C2f, [512, True]]
  - [-1, 1, Conv, [1024, 3, 2]] # 7-P5/32
  - [-1, 3, C2f, [1024, True]]
  - [-1, 1, SPPF, [1024, 5]] # 9

# YOLOv8.0n head
head:
  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]
  - [[-1, 6], 1, Concat, [1]] # cat backbone P4
  - [-1, 3, C2f, [512]] # 12

  - [-1, 1, nn.Upsample, [None, 2, "nearest"]]
  - [[-1, 4], 1, Concat, [1]] # cat backbone P3
  - [-1, 3, C2f, [256]] # 15 (P3/8-small)

  - [-1, 1, Conv, [256, 3, 2]]
  - [[-1, 12], 1, Concat, [1]] # cat head P4
  - [-1, 3, C2f, [512]] # 18 (P4/16-medium)

  - [-1, 1, Conv, [512, 3, 2]]
  - [[-1, 9], 1, Concat, [1]] # cat head P5
  - [-1, 3, C2f, [1024]] # 21 (P5/32-large)

  - [[15, 18, 21], 1, Detect, [nc]] # Detect(P3, P4, P5)
  - ```
```



# Backbone的主要功能：

在深度学习和计算机视觉中，“backbone”一词通常指的是用于特征提取的网络部分。在一个典型的物体检测模型如YOLOv8中，backbone是基础架构，负责从输入图像中提取有用的视觉特征。

1. **层次化特征提取**：
   - Backbone通过多层卷积网络逐步提取从简单到复杂的特征。
   - 每个卷积层通常会提取不同级别的特征，比如边缘、颜色、形状等，更深层次的则可能提取更为复杂的模式和对象部分。

2. **数据压缩和空间理解**：
   - 通过逐渐减少空间维度（例如使用步长大于1的卷积）来压缩数据，这有助于模型理解更广阔的空间关系和减少计算量。

3. **预训练利用**：
   - 在许多情况下，backbone部分可以使用预先在大型数据集（如ImageNet）上训练的权重来初始化。这种预训练可以显著提高模型在特定任务（如物体检测）上的表现，因为模型已经学会了解析基本的视觉元素。

## 在YOLOv8中的应用：

在`yolov8.yaml`文件中，backbone部分定义了模型如何构建其初级特征提取层。这包括多个卷积层和其他特殊层（如SPPF或C2f层），它们被配置为逐步处理图像，逐层加深特征的复杂性和抽象度。这些特征随后被传递到网络的其他部分（比如head），用于进一步的处理和最终的物体检测任务。

### 1. 卷积层（Conv）
卷积层是深度学习中用于特征提取的最基本单元。它们通过一个小窗口（称为卷积核或滤波器）在输入图像或特征图上滑动，计算窗口覆盖的区域与卷积核的点乘，生成新的特征图。这个过程捕获了输入数据的局部依赖性和空间层级结构。

- **参数**：在`Conv`层配置中，如`[64, 3, 2]`表示卷积层有64个滤波器，每个滤波器的大小是3x3，步长为2（步长控制滤波器跨越输入的速度，步长为2意味着输出的空间尺寸是输入的一半）。

### 2. C2f层
`C2f`层可能是一种特殊设计的层，通常用于深度学习模型中增强特征提取或改进信息流。虽然具体实现可能依模型设计而异，一般来说，这种层可能包含组合操作（如融合不同层的特征），或是通过特殊的操作改善训练过程中的梯度流或特征表达。

- **参数**：如`[128, True]`可能指这一层使用128个通道，并启用某种特定的特性或标准化。

### 3. SPPF层（空间金字塔池化快速版）
空间金字塔池化（Spatial Pyramid Pooling, SPP）层用于深度卷积网络中，可以处理不同尺寸的输入。它在网络内部创建多级池化操作，以保证输出尺寸的一致性，使得网络能适应任意尺寸的输入。`SPPF`可能是一种快速或改进的SPP层实现。

- **参数**：如`[1024, 5]`表示对1024个通道进行池化，池化窗口或级别为5。

### 4. Upsample层
上采样层用于增加特征图的空间维度（即宽度和高度），常见于需要恢复到原始图像尺寸的任务（如图像分割或某些类型的物体检测）。这使得从深层网络得到的高层次特征能够在原始图像的空间分辨率上进行更精确的定位。

- **参数**：如`[None, 2, "nearest"]`表示使用最邻近插值方法将特征图的尺寸放大2倍。
